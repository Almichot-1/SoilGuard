{
    "sourceFile": "lib/screens/home_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1765222377317,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765292335847,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,9 +44,9 @@\n             begin: Alignment.topCenter,\r\n             end: Alignment.bottomCenter,\r\n             colors: [\r\n               AppColors.primary,\r\n-              AppColors.primary.withOpacity(0.8),\r\n+              AppColors.primary.withValues(alpha: 0.8),\r\n             ],\r\n           ),\r\n         ),\r\n         child: SafeArea(\r\n@@ -71,9 +71,9 @@\n               const SizedBox(height: 8),\r\n               Text(\r\n                 'Smart Farming Starts Here',\r\n                 style: Theme.of(context).textTheme.bodyLarge?.copyWith(\r\n-                  color: Colors.white.withOpacity(0.8),\r\n+                  color: Colors.white.withValues(alpha: 0.8),\r\n                 ),\r\n               ),\r\n               \r\n               const SizedBox(height: 40),\r\n@@ -206,9 +206,9 @@\n               // Version\r\n               Text(\r\n                 'v${AppConstants.version} • 100% Offline',\r\n                 style: TextStyle(\r\n-                  color: Colors.white.withOpacity(0.6),\r\n+                  color: Colors.white.withValues(alpha: 0.6),\r\n                   fontSize: 12,\r\n                 ),\r\n               ),\r\n               \r\n"
                }
            ],
            "date": 1765222377317,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:provider/provider.dart';\r\nimport '../services/ble_service.dart';\r\nimport '../services/gps_service.dart';\r\nimport '../services/db_service.dart';\r\nimport '../utils/constants.dart';\r\nimport 'scan_screen.dart';\r\nimport 'history_screen.dart';\r\n\r\nclass HomeScreen extends StatefulWidget {\r\n  const HomeScreen({super.key});\r\n\r\n  @override\r\n  State<HomeScreen> createState() => _HomeScreenState();\r\n}\r\n\r\nclass _HomeScreenState extends State<HomeScreen> {\r\n  int _scanCount = 0;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    _loadStats();\r\n    _initializeServices();\r\n  }\r\n\r\n  Future<void> _initializeServices() async {\r\n    final gpsService = context.read<GpsService>();\r\n    await gpsService.initialize();\r\n  }\r\n\r\n  Future<void> _loadStats() async {\r\n    final dbService = context.read<DatabaseService>();\r\n    final count = await dbService.getScanCount();\r\n    setState(() => _scanCount = count);\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Scaffold(\r\n      body: Container(\r\n        decoration: BoxDecoration(\r\n          gradient: LinearGradient(\r\n            begin: Alignment.topCenter,\r\n            end: Alignment.bottomCenter,\r\n            colors: [\r\n              AppColors.primary,\r\n              AppColors.primary.withOpacity(0.8),\r\n            ],\r\n          ),\r\n        ),\r\n        child: SafeArea(\r\n          child: Column(\r\n            children: [\r\n              const SizedBox(height: 40),\r\n              \r\n              // Logo and title\r\n              Icon(\r\n                Icons.eco,\r\n                size: 80,\r\n                color: Colors.white,\r\n              ),\r\n              const SizedBox(height: 16),\r\n              Text(\r\n                'Soil Sense',\r\n                style: Theme.of(context).textTheme.headlineLarge?.copyWith(\r\n                  color: Colors.white,\r\n                  fontWeight: FontWeight.bold,\r\n                ),\r\n              ),\r\n              const SizedBox(height: 8),\r\n              Text(\r\n                'Smart Farming Starts Here',\r\n                style: Theme.of(context).textTheme.bodyLarge?.copyWith(\r\n                  color: Colors.white.withOpacity(0.8),\r\n                ),\r\n              ),\r\n              \r\n              const SizedBox(height: 40),\r\n              \r\n              // Stats card\r\n              Padding(\r\n                padding: const EdgeInsets.symmetric(horizontal: 24),\r\n                child: Card(\r\n                  elevation: 8,\r\n                  shape: RoundedRectangleBorder(\r\n                    borderRadius: BorderRadius.circular(20),\r\n                  ),\r\n                  child: Padding(\r\n                    padding: const EdgeInsets.all(24),\r\n                    child: Row(\r\n                      mainAxisAlignment: MainAxisAlignment.spaceAround,\r\n                      children: [\r\n                        _StatItem(\r\n                          icon: Icons.document_scanner,\r\n                          value: '$_scanCount',\r\n                          label: 'Scans',\r\n                        ),\r\n                        Container(\r\n                          height: 50,\r\n                          width: 1,\r\n                          color: Colors.grey.shade300,\r\n                        ),\r\n                        Consumer<GpsService>(\r\n                          builder: (context, gps, _) => _StatItem(\r\n                            icon: Icons.gps_fixed,\r\n                            value: gps.status == GpsStatus.ready ? 'Ready' : 'Off',\r\n                            label: 'GPS',\r\n                            valueColor: gps.status == GpsStatus.ready \r\n                                ? Colors.green \r\n                                : Colors.orange,\r\n                          ),\r\n                        ),\r\n                        Container(\r\n                          height: 50,\r\n                          width: 1,\r\n                          color: Colors.grey.shade300,\r\n                        ),\r\n                        Consumer<BleService>(\r\n                          builder: (context, ble, _) => _StatItem(\r\n                            icon: Icons.bluetooth,\r\n                            value: ble.isConnected ? 'On' : 'Off',\r\n                            label: 'Sensor',\r\n                            valueColor: ble.isConnected \r\n                                ? Colors.green \r\n                                : Colors.grey,\r\n                          ),\r\n                        ),\r\n                      ],\r\n                    ),\r\n                  ),\r\n                ),\r\n              ),\r\n              \r\n              const Spacer(),\r\n              \r\n              // Action buttons\r\n              Padding(\r\n                padding: const EdgeInsets.symmetric(horizontal: 24),\r\n                child: Column(\r\n                  children: [\r\n                    // Start Scan button\r\n                    SizedBox(\r\n                      width: double.infinity,\r\n                      height: 60,\r\n                      child: ElevatedButton.icon(\r\n                        onPressed: () {\r\n                          Navigator.push(\r\n                            context,\r\n                            MaterialPageRoute(\r\n                              builder: (_) => const ScanScreen(),\r\n                            ),\r\n                          ).then((_) => _loadStats());\r\n                        },\r\n                        icon: const Icon(Icons.play_arrow, size: 28),\r\n                        label: const Text(\r\n                          'Start Field Scan',\r\n                          style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),\r\n                        ),\r\n                        style: ElevatedButton.styleFrom(\r\n                          backgroundColor: Colors.white,\r\n                          foregroundColor: AppColors.primary,\r\n                          shape: RoundedRectangleBorder(\r\n                            borderRadius: BorderRadius.circular(16),\r\n                          ),\r\n                          elevation: 4,\r\n                        ),\r\n                      ),\r\n                    ),\r\n                    \r\n                    const SizedBox(height: 16),\r\n                    \r\n                    // History button\r\n                    SizedBox(\r\n                      width: double.infinity,\r\n                      height: 56,\r\n                      child: OutlinedButton.icon(\r\n                        onPressed: () {\r\n                          Navigator.push(\r\n                            context,\r\n                            MaterialPageRoute(\r\n                              builder: (_) => const HistoryScreen(),\r\n                            ),\r\n                          ).then((_) => _loadStats());\r\n                        },\r\n                        icon: const Icon(Icons.history),\r\n                        label: const Text(\r\n                          'View History',\r\n                          style: TextStyle(fontSize: 16),\r\n                        ),\r\n                        style: OutlinedButton.styleFrom(\r\n                          foregroundColor: Colors.white,\r\n                          side: const BorderSide(color: Colors.white, width: 2),\r\n                          shape: RoundedRectangleBorder(\r\n                            borderRadius: BorderRadius.circular(16),\r\n                          ),\r\n                        ),\r\n                      ),\r\n                    ),\r\n                  ],\r\n                ),\r\n              ),\r\n              \r\n              const SizedBox(height: 40),\r\n              \r\n              // Version\r\n              Text(\r\n                'v${AppConstants.version} • 100% Offline',\r\n                style: TextStyle(\r\n                  color: Colors.white.withOpacity(0.6),\r\n                  fontSize: 12,\r\n                ),\r\n              ),\r\n              \r\n              const SizedBox(height: 20),\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass _StatItem extends StatelessWidget {\r\n  final IconData icon;\r\n  final String value;\r\n  final String label;\r\n  final Color? valueColor;\r\n\r\n  const _StatItem({\r\n    required this.icon,\r\n    required this.value,\r\n    required this.label,\r\n    this.valueColor,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Column(\r\n      children: [\r\n        Icon(icon, color: AppColors.primary, size: 28),\r\n        const SizedBox(height: 8),\r\n        Text(\r\n          value,\r\n          style: TextStyle(\r\n            fontSize: 18,\r\n            fontWeight: FontWeight.bold,\r\n            color: valueColor ?? Colors.black87,\r\n          ),\r\n        ),\r\n        Text(\r\n          label,\r\n          style: TextStyle(\r\n            fontSize: 12,\r\n            color: Colors.grey.shade600,\r\n          ),\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}"
        }
    ]
}