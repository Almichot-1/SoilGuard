{
    "sourceFile": "lib/screens/results_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1765222426336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765292345660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,9 @@\n                         color: Colors.white,\r\n                         borderRadius: BorderRadius.circular(20),\r\n                         boxShadow: [\r\n                           BoxShadow(\r\n-                            color: Colors.black.withOpacity(0.2),\r\n+                            color: Colors.black.withValues(alpha: 0.2),\r\n                             blurRadius: 8,\r\n                           ),\r\n                         ],\r\n                       ),\r\n@@ -88,9 +88,9 @@\n               decoration: BoxDecoration(\r\n                 gradient: LinearGradient(\r\n                   colors: [\r\n                     AppColors.primary,\r\n-                    AppColors.primary.withOpacity(0.8),\r\n+                    AppColors.primary.withValues(alpha: 0.8),\r\n                   ],\r\n                 ),\r\n                 borderRadius: BorderRadius.circular(16),\r\n               ),\r\n@@ -221,9 +221,9 @@\n         ),\r\n         Text(\r\n           label,\r\n           style: TextStyle(\r\n-            color: Colors.white.withOpacity(0.8),\r\n+            color: Colors.white.withValues(alpha: 0.8),\r\n             fontSize: 12,\r\n           ),\r\n         ),\r\n       ],\r\n"
                }
            ],
            "date": 1765222426336,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport '../models/scan_result.dart';\r\nimport '../utils/constants.dart';\r\nimport '../widgets/crop_recommendation_card.dart';\r\nimport '../widgets/live_map_widget.dart';\r\n\r\nclass ResultsScreen extends StatefulWidget {\r\n  final ScanResult result;\r\n\r\n  const ResultsScreen({super.key, required this.result});\r\n\r\n  @override\r\n  State<ResultsScreen> createState() => _ResultsScreenState();\r\n}\r\n\r\nclass _ResultsScreenState extends State<ResultsScreen> {\r\n  int _expandedIndex = 0;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final result = widget.result;\r\n    \r\n    return Scaffold(\r\n      appBar: AppBar(\r\n        title: const Text('Scan Results'),\r\n        backgroundColor: AppColors.primary,\r\n        foregroundColor: Colors.white,\r\n      ),\r\n      body: SingleChildScrollView(\r\n        child: Column(\r\n          crossAxisAlignment: CrossAxisAlignment.start,\r\n          children: [\r\n            // Map preview\r\n            SizedBox(\r\n              height: 200,\r\n              child: Stack(\r\n                children: [\r\n                  LiveMapWidget(\r\n                    trackPoints: result.gpsPoints,\r\n                    currentLocation: result.gpsPoints.isNotEmpty \r\n                        ? result.gpsPoints.first \r\n                        : null,\r\n                  ),\r\n                  // Area overlay\r\n                  Positioned(\r\n                    top: 16,\r\n                    left: 16,\r\n                    child: Container(\r\n                      padding: const EdgeInsets.symmetric(\r\n                        horizontal: 16,\r\n                        vertical: 8,\r\n                      ),\r\n                      decoration: BoxDecoration(\r\n                        color: Colors.white,\r\n                        borderRadius: BorderRadius.circular(20),\r\n                        boxShadow: [\r\n                          BoxShadow(\r\n                            color: Colors.black.withOpacity(0.2),\r\n                            blurRadius: 8,\r\n                          ),\r\n                        ],\r\n                      ),\r\n                      child: Row(\r\n                        children: [\r\n                          Icon(Icons.square_foot, color: AppColors.primary),\r\n                          const SizedBox(width: 8),\r\n                          Text(\r\n                            result.areaHa < 1\r\n                                ? '${result.areaM2.toStringAsFixed(0)} m²'\r\n                                : '${result.areaHa.toStringAsFixed(3)} ha',\r\n                            style: const TextStyle(\r\n                              fontSize: 18,\r\n                              fontWeight: FontWeight.bold,\r\n                            ),\r\n                          ),\r\n                        ],\r\n                      ),\r\n                    ),\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n            \r\n            // Soil data summary\r\n            Container(\r\n              margin: const EdgeInsets.all(16),\r\n              padding: const EdgeInsets.all(16),\r\n              decoration: BoxDecoration(\r\n                gradient: LinearGradient(\r\n                  colors: [\r\n                    AppColors.primary,\r\n                    AppColors.primary.withOpacity(0.8),\r\n                  ],\r\n                ),\r\n                borderRadius: BorderRadius.circular(16),\r\n              ),\r\n              child: Row(\r\n                mainAxisAlignment: MainAxisAlignment.spaceAround,\r\n                children: [\r\n                  _SoilDataItem(\r\n                    icon: Icons.water_drop,\r\n                    label: 'pH',\r\n                    value: result.soilData.ph.toStringAsFixed(1),\r\n                  ),\r\n                  Container(height: 40, width: 1, color: Colors.white30),\r\n                  _SoilDataItem(\r\n                    icon: Icons.opacity,\r\n                    label: 'Moisture',\r\n                    value: '${result.soilData.moisture.toStringAsFixed(0)}%',\r\n                  ),\r\n                  Container(height: 40, width: 1, color: Colors.white30),\r\n                  _SoilDataItem(\r\n                    icon: Icons.thermostat,\r\n                    label: 'Temp',\r\n                    value: '${result.soilData.temperature.toStringAsFixed(0)}°C',\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n            \r\n            // Recommendations header\r\n            Padding(\r\n              padding: const EdgeInsets.symmetric(horizontal: 16),\r\n              child: Row(\r\n                children: [\r\n                  Icon(Icons.recommend, color: AppColors.primary),\r\n                  const SizedBox(width: 8),\r\n                  Text(\r\n                    'Recommended Crops',\r\n                    style: Theme.of(context).textTheme.titleLarge?.copyWith(\r\n                      fontWeight: FontWeight.bold,\r\n                    ),\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n            \r\n            const SizedBox(height: 8),\r\n            \r\n            // Recommendation cards\r\n            ListView.builder(\r\n              shrinkWrap: true,\r\n              physics: const NeverScrollableScrollPhysics(),\r\n              padding: const EdgeInsets.symmetric(horizontal: 16),\r\n              itemCount: result.recommendations.length,\r\n              itemBuilder: (context, index) {\r\n                return Padding(\r\n                  padding: const EdgeInsets.only(bottom: 12),\r\n                  child: CropRecommendationCard(\r\n                    recommendation: result.recommendations[index],\r\n                    rank: index + 1,\r\n                    isExpanded: _expandedIndex == index,\r\n                    onTap: () {\r\n                      setState(() {\r\n                        _expandedIndex = _expandedIndex == index ? -1 : index;\r\n                      });\r\n                    },\r\n                  ),\r\n                );\r\n              },\r\n            ),\r\n            \r\n            const SizedBox(height: 20),\r\n            \r\n            // Done button\r\n            Padding(\r\n              padding: const EdgeInsets.all(16),\r\n              child: SizedBox(\r\n                width: double.infinity,\r\n                height: 56,\r\n                child: ElevatedButton.icon(\r\n                  onPressed: () {\r\n                    Navigator.popUntil(context, (route) => route.isFirst);\r\n                  },\r\n                  icon: const Icon(Icons.check_circle),\r\n                  label: const Text(\r\n                    'Done',\r\n                    style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),\r\n                  ),\r\n                  style: ElevatedButton.styleFrom(\r\n                    backgroundColor: AppColors.primary,\r\n                    foregroundColor: Colors.white,\r\n                    shape: RoundedRectangleBorder(\r\n                      borderRadius: BorderRadius.circular(16),\r\n                    ),\r\n                  ),\r\n                ),\r\n              ),\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass _SoilDataItem extends StatelessWidget {\r\n  final IconData icon;\r\n  final String label;\r\n  final String value;\r\n\r\n  const _SoilDataItem({\r\n    required this.icon,\r\n    required this.label,\r\n    required this.value,\r\n  });\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Column(\r\n      children: [\r\n        Icon(icon, color: Colors.white, size: 28),\r\n        const SizedBox(height: 4),\r\n        Text(\r\n          value,\r\n          style: const TextStyle(\r\n            color: Colors.white,\r\n            fontSize: 20,\r\n            fontWeight: FontWeight.bold,\r\n          ),\r\n        ),\r\n        Text(\r\n          label,\r\n          style: TextStyle(\r\n            color: Colors.white.withOpacity(0.8),\r\n            fontSize: 12,\r\n          ),\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}"
        }
    ]
}