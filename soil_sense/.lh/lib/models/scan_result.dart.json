{
    "sourceFile": "lib/models/scan_result.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1765222242727,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1765222242727,
            "name": "Commit-0",
            "content": "import 'package:latlong2/latlong.dart';\r\nimport 'soil_data.dart';\r\nimport 'recommendation.dart';\r\n\r\nclass ScanResult {\r\n  final int? id;\r\n  final SoilData soilData;\r\n  final double areaM2;\r\n  final double areaHa;\r\n  final List<LatLng> gpsPoints;\r\n  final List<Recommendation> recommendations;\r\n  final DateTime timestamp;\r\n\r\n  ScanResult({\r\n    this.id,\r\n    required this.soilData,\r\n    required this.areaM2,\r\n    required this.areaHa,\r\n    required this.gpsPoints,\r\n    required this.recommendations,\r\n    DateTime? timestamp,\r\n  }) : timestamp = timestamp ?? DateTime.now();\r\n\r\n  Map<String, dynamic> toDbMap() => {\r\n    'avg_ph': soilData.ph,\r\n    'avg_moisture': soilData.moisture,\r\n    'avg_temp': soilData.temperature,\r\n    'area_m2': areaM2,\r\n    'area_ha': areaHa,\r\n    'gps_points': gpsPoints.map((p) => '${p.latitude},${p.longitude}').join(';'),\r\n    'timestamp': timestamp.toIso8601String(),\r\n  };\r\n\r\n  factory ScanResult.fromDb(Map<String, dynamic> map, List<Recommendation> recs) {\r\n    final gpsString = map['gps_points'] as String? ?? '';\r\n    final points = gpsString.isEmpty \r\n        ? <LatLng>[]\r\n        : gpsString.split(';').map((s) {\r\n            final parts = s.split(',');\r\n            return LatLng(double.parse(parts[0]), double.parse(parts[1]));\r\n          }).toList();\r\n\r\n    return ScanResult(\r\n      id: map['id'] as int?,\r\n      soilData: SoilData(\r\n        ph: map['avg_ph'] as double,\r\n        moisture: map['avg_moisture'] as double,\r\n        temperature: map['avg_temp'] as double,\r\n      ),\r\n      areaM2: map['area_m2'] as double,\r\n      areaHa: map['area_ha'] as double,\r\n      gpsPoints: points,\r\n      recommendations: recs,\r\n      timestamp: DateTime.parse(map['timestamp'] as String),\r\n    );\r\n  }\r\n}"
        }
    ]
}